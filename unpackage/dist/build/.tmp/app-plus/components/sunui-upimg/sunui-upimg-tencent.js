(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/sunui-upimg/sunui-upimg-tencent"],{"16d4":function(e,t,n){"use strict";(function(e,u){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("a34a"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,u,r,i,c){try{var a=e[i](c),o=a.value}catch(s){return void n(s)}a.done?t(o):Promise.resolve(o).then(u,r)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(u,r){var i=e.apply(t,n);function a(e){c(i,u,r,a,o,"next",e)}function o(e){c(i,u,r,a,o,"throw",e)}a(void 0)})}}var o=n("69a5"),s={data:function(){return{upload_after_list:[],upload_picture_list:[]}},name:"sunui-upimg",props:{upImgConfig:{type:Object}},methods:{initServerImage:function(e){this.upload_picture_list=e},chooseImage:function(e){d(this,parseInt(e),this.upImgConfig)},uploadimage:function(e){p(this,e)},deleteImg:function(e){f(e,this)},previewImg:function(e){h(e,this)},previewImgs:function(e){g(e,this)}}};t.default=s;var l=function(){var t=a(r.default.mark(function t(n,u,i,c){var a,s,l,p;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a={Bucket:u.cosConfig.Bucket,Region:u.cosConfig.Region,SecretId:u.cosConfig.SecretId,SecretKey:u.cosConfig.SecretKey},s=new o({getAuthorization:function(e,t){var n=o.getAuthorization({SecretId:a.SecretId,SecretKey:a.SecretKey,Method:e.Method,Key:e.Key});t(n)}}),l=i[c]["path"],p=l.substr(l.lastIndexOf("/")+1),s.postObject({Bucket:a.Bucket,Region:a.Region,Key:p,FilePath:l},function(t,n){null==t?(console.log(e("%c 腾讯云上传(成功返回地址):".concat(n.headers.Location),"color:#1AAD19"," at components\\sunui-upimg\\sunui-upimg-tencent.vue:123")),i[c]["path_server"]=n.headers.Location,i[c]["upload_percent"]=100):console.log(e("%c 腾讯云上传失败:".concat(JSON.stringify(t)),"color:#f00"," at components\\sunui-upimg\\sunui-upimg-tencent.vue:127"))}),t.next=7,n.$emit("onUpImg",i);case 7:n.upload_picture_list=i;case 8:case"end":return t.stop()}},t,this)}));return function(e,n,u,r){return t.apply(this,arguments)}}(),p=function(){var e=a(r.default.mark(function e(t,n){var u,i;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:u=0,i=t.upload_picture_list.length;case 1:if(!(u<i)){e.next=8;break}if(0!=t.upload_picture_list[u]["upload_percent"]){e.next=5;break}return e.next=5,l(t,n,t.upload_picture_list,u);case 5:u++,e.next=1;break;case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=a(r.default.mark(function e(t,n){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$emit("onImgDel",{url:t.currentTarget.dataset.url,index:t.currentTarget.dataset.index});case 2:n.upload_picture_list.splice(t.currentTarget.dataset.index,1),n.upload_after_list.splice(t.currentTarget.dataset.index,1),n.upload_picture_list=n.upload_picture_list;case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),d=function(e,t,n){var i={cosConfig:{Bucket:n.cosConfig.Bucket,Region:n.cosConfig.Region,SecretId:n.cosConfig.SecretId,SecretKey:n.cosConfig.SecretKey},count:t,notli:n.notli,sourceType:n.sourceType,sizeType:n.sizeType,tips:n.tips||!1};u.chooseImage({count:i.notli?i.count=9:0==e.upload_after_list.length?i.count:i.count-e.upload_after_list.length,sizeType:""==i.sizeType||void 0==i.sizeType||1==i.sizeType?["compressed"]:["original"],sourceType:""==i.sourceType||void 0==i.sourceType?["album","camera"]:"camera"==i.sourceType?["camera"]:"album"==i.sourceType?["album"]:["album","camera"],success:function(){var t=a(r.default.mark(function t(n){var u,c;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(u=0,c=n.tempFiles.length;u<c;u++)n.tempFiles[u]["upload_percent"]=0,n.tempFiles[u]["path_server"]="",e.upload_picture_list.push(n.tempFiles[u]),e.upload_picture_list.length>i.count&&(e.upload_picture_list=e.upload_picture_list.slice(0,i.count));return t.next=3,_(e,n,i);case 3:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()})},_=function(e,t,n){!n.notli&&n.count==e.upload_picture_list.length&&p(e,n),n.notli&&9==n.count&&p(e,n),e.upload_after_list=e.upload_after_list.concat(t.tempFilePaths).slice(0,n.count),e.upload_picture_list=e.upload_picture_list.slice(0,n.count)},h=function(e,t){for(var n=[],r=0,i=t.upload_picture_list.length;r<i;r++)n.push(t.upload_picture_list[r].path);u.previewImage({current:t.upload_picture_list[e.currentTarget.dataset.index].path,urls:n})},g=function(){var e=a(r.default.mark(function e(t,n){var i,c,a;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(i=[],c=0,a=n.upload_picture_list.length;c<a;c++)i.push(n.upload_picture_list[c].path_server);u.previewImage({current:t.currentTarget.dataset.src,urls:i});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}).call(this,n("0de9")["default"],n("6e42")["default"])},"3a30":function(e,t,n){"use strict";n.r(t);var u=n("af6f"),r=n("8bd6");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("9125");var c,a=n("f0c5"),o=Object(a["a"])(r["default"],u["b"],u["c"],!1,null,"90ab8e4a",null,!1,u["a"],c);t["default"]=o.exports},8173:function(e,t,n){},"8bd6":function(e,t,n){"use strict";n.r(t);var u=n("16d4"),r=n.n(u);for(var i in u)"default"!==i&&function(e){n.d(t,e,function(){return u[e]})}(i);t["default"]=r.a},9125:function(e,t,n){"use strict";var u=n("8173"),r=n.n(u);r.a},af6f:function(e,t,n){"use strict";var u,r=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return u})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/sunui-upimg/sunui-upimg-tencent-create-component',
    {
        'components/sunui-upimg/sunui-upimg-tencent-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("3a30"))
        })
    },
    [['components/sunui-upimg/sunui-upimg-tencent-create-component']]
]);
