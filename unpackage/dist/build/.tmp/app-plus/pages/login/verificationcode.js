(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/verificationcode"],{"09f8":function(e,t,o){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c},s=[];o.d(t,"b",function(){return i}),o.d(t,"c",function(){return s}),o.d(t,"a",function(){return n})},"1d49":function(e,t,o){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(o("251f"));function i(e){return e&&e.__esModule?e:{default:e}}var s={data:function(){return{phoneNumber2:"",mycode2:"",phoneNumber:"",mycode:"",remindWindows:!1,userId:"",name:"",address:"",code:"000000",passwd:"",getCodeText:"获取验证码",getCodeBtnColor:"#000",getCodeisWaiting:!1}},onShow:function(){},onLoad:function(){this.isShowOauth=!0;var t=e.getStorageSync("userId");this.userId=t},onBackPress:function(e){plus.runtime.quit()},methods:{wxLogin:function(){var t=this;e.getProvider({service:"oauth",success:function(o){~o.provider.indexOf("weixin")&&e.login({provider:"weixin",success:function(o){var n=o.authResult.access_token,i=o.authResult.openid;e.request({url:"http://39.99.137.77:8081/projects/weChatLogin/findOpenId?access_token="+n+"&openId="+i,data:"",header:{"Content-Type":"application/json"},success:function(o){if(400==o.data.code&&(t.remindWindows=!0),200==o.data.code){var n=Number(o.data.data);e.setStorage({key:"userId",data:n,success:function(){e.showToast({title:"登录成功",icon:"success"}),e.switchTab({url:"../tabBar/home/home"})}})}},fail:function(e){}})}})}})},closeWindows:function(){this.remindWindows=!1},weixinlogin:function(){var t=this;return e.hideKeyboard(),/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.phoneNumber)?t.mycode!=t.code?(e.showToast({title:"验证码不正确",icon:"none"}),!1):void e.getProvider({service:"oauth",success:function(o){~o.provider.indexOf("weixin")&&e.login({provider:"weixin",success:function(o){JSON.stringify(o);var n=o.authResult.access_token,i=o.authResult.openid,s=t.phoneNumber;e.request({url:"http://39.99.137.77:8081/projects/weChatLogin/getUserInfo?access_token="+n+"&openId="+i+"&phone="+s,data:"",header:{"Content-Type":"application/json"},success:function(t){var o=t.data.data;e.setStorage({key:"userId",data:o,success:function(){e.showToast({title:"登录成功",icon:"success"}),setTimeout(function(){e.switchTab({url:"../tabBar/home/home"})},500)}})},fail:function(e){}})}})}}):(e.showToast({title:"请填写正确手机号码",icon:"none"}),!1)},Timer:function(){},getCode:function(){var t=this;if(e.hideKeyboard(),!t.getCodeisWaiting){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.phoneNumber))return e.showToast({title:"请填写正确手机号码",icon:"none"}),!1;t.getCodeText="发送中...",t.getCodeisWaiting=!0,t.getCodeBtnColor="#000",e.showToast({title:"验证码已发送",icon:"none"});var o=t.phoneNumber;t.Get("http://39.99.137.77:8081/projects/weChatLogin/findByPhone?phone="+o,{},function(o){401==o.code&&e.showToast({title:"请更换手机号",duration:2e3,icon:"none"}),200==o.code&&t.Get("http://39.99.137.77:8081/projects/send/sms",{phone:t.phoneNumber},function(e){t.code=e.randomNumeric})}),this.setTimer()}},getCode2:function(){var t=this;if(e.hideKeyboard(),!this.getCodeisWaiting){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber2))return e.showToast({title:"请填写正确手机号码",icon:"none"}),!1;this.getCodeText="发送中...",this.getCodeisWaiting=!0,this.getCodeBtnColor="#000",e.showToast({title:"验证码已发送",icon:"none"}),this.Get("http://39.99.137.77:8081/projects/send/sms",{phone:this.phoneNumber2},function(e){t.code=e.randomNumeric,console.log(n(t.code," at pages\\login\\verificationcode.vue:279"))}),this.setTimer()}},setTimer:function(){var e=this,t=60;this.getCodeText="重新获取(60)",this.Timer=setInterval(function(){if(t<=0)return e.getCodeisWaiting=!1,e.getCodeBtnColor="#000",e.getCodeText="获取验证码",void clearInterval(e.Timer);e.getCodeText="重新获取("+t+")",t--},1e3)},doLogin:function(){var t=this;return e.hideKeyboard(),/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber2)?this.mycode2!==this.code?(e.showToast({title:"验证码不正确",icon:"none"}),!1):""==this.mycode2?(e.showToast({title:"没有填写验证码",icon:"none"}),!1):void(""!=this.mycode2&&this.mycode2==this.code&&this.Get("http://39.99.137.77:8081/projects/login",{phone:this.phoneNumber2},function(o){console.log(n(o," at pages\\login\\verificationcode.vue:320")),"OK"==o.code&&(t.userId=o.userId,e.setStorage({key:"userId",data:t.userId,success:function(){e.showToast({title:"登录成功",icon:"success"}),e.switchTab({url:"../tabBar/home/home"})}})),"FAIL"==o.code&&e.showToast({title:o.msg,icon:"none"})})):(e.showToast({title:"请填写正确手机号码",icon:"none"}),!1)},toPage:function(t){e.hideKeyboard(),e.navigateTo({url:t})},Post:function(t,o,n){e.request({method:"POST",url:t,data:o,header:{"Content-Type":"application/json"},success:function(e){n(e.data)},fail:function(e){n(e.data)}})},Get:function(t,o,n){e.request({url:t,data:o,header:{"Content-Type":"application/json"},success:function(e){n(e.data)},fail:function(e){n(e.data)}})}}};t.default=s}).call(this,o("6e42")["default"],o("0de9")["default"])},"445b":function(e,t,o){"use strict";o.r(t);var n=o("09f8"),i=o("b4fb");for(var s in i)"default"!==s&&function(e){o.d(t,e,function(){return i[e]})}(s);o("a2c8");var a,c=o("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);t["default"]=r.exports},"8e2e":function(e,t,o){"use strict";(function(e){o("5925"),o("921b");n(o("66fd"));var t=n(o("445b"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},a2c8:function(e,t,o){"use strict";var n=o("eb2a"),i=o.n(n);i.a},b4fb:function(e,t,o){"use strict";o.r(t);var n=o("1d49"),i=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},eb2a:function(e,t,o){}},[["8e2e","common/runtime","common/vendor"]]]);