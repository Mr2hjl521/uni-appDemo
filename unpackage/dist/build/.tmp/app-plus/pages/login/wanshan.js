(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/wanshan"],{"0800":function(e,t,r){"use strict";r.r(t);var o=r("ef2a"),n=r("ae14");for(var a in n)"default"!==a&&function(e){r.d(t,e,function(){return n[e]})}(a);r("b63b");var i,s=r("f0c5"),u=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=u.exports},"3ed7":function(e,t,r){},"757e":function(e,t,r){"use strict";(function(e){r("5925"),r("921b");o(r("66fd"));var t=o(r("0800"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},ae14:function(e,t,r){"use strict";r.r(t);var o=r("fd82"),n=r.n(o);for(var a in o)"default"!==a&&function(e){r.d(t,e,function(){return o[e]})}(a);t["default"]=n.a},b63b:function(e,t,r){"use strict";var o=r("3ed7"),n=r.n(o);n.a},ef2a:function(e,t,r){"use strict";var o,n=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"b",function(){return n}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return o})},fd82:function(e,t,r){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("a34a"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,o,n,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(o,n)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function s(e){i(a,o,n,s,u,"next",e)}function u(e){i(a,o,n,s,u,"throw",e)}s(void 0)})}}var u=function(){return r.e("components/mpvue-picker/mpvuePicker").then(r.bind(null,"64fe"))},c={components:{mpvuePicker:u},data:function(){return{show1:!1,show5:!1,newSchoolData:"",serachFlag:1,floorNumber:"几号楼",pppic:"",picShow:!1,id:"",type:"",imgUrl:"",schoolIdArr:[],schoolId:"",buildingIdArr:[],buildingId:"",userId:"",name:"",pickerSingleArray:[],pickerBuilding:[],themeColor:"#007AFF",pickerText:"",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],schoolData:"",doorNumber:"",basicArr:[],upImgBasic:{basicConfig:{url:""},notli:!1,count:2,sourceType:"all",sizeType:!0,upBgColor:"#E8A400",upIconColor:"#fff",delBtnLocation:""}}},onLoad:function(){var t=this;e.getStorage({key:"userId",success:function(e){var r=e.data;t.userId=Number(e.data),t.upImgBasic.basicConfig.url="http://39.99.137.77:8081/projects/image/userAvatarImage/upload?userId="+e.data,t.Get("http://39.99.137.77:8081/projects/clientUserAddress/selectBooleanAddress",{clientUserId:r},function(e){!0===e.flag?(t.type=1,t.floorNumber=e.data.floorNumber,t.doorNumber=e.data.doorNumber,t.id=e.data.id):t.type=0})}})},methods:{openSearch:function(){this.serachFlag=1,this.show1=!0},goIgnore:function(){e.switchTab({url:"../tabBar/home/home"})},showBuilding:function(){var t=this;if(e.hideKeyboard(),this.show6=!1,""==this.newSchoolData)return this.schoolId="",void e.showModal({title:"提示",content:"请确保您已选择学校"});this.pickerBuilding=[],this.buildingIdArr=[],this.Get("http://39.99.137.77:8081/projects/floor/findFloorByCampusId",{campusId:this.schoolId},function(r){console.log(o(r," at pages\\login\\wanshan.vue:181"));var n=r;if(n.length>0){for(var a=0;a<n.length;a++)t.pickerBuilding.push({label:n[a].floorNumber,value:n[a].campusId}),t.buildingIdArr.push(n[a].campusId);t.pickerValueArray=t.pickerBuilding,t.mode="selector",t.deepLength=1,t.pickerValueDefault=[0],t.$refs.mpbuilding.show()}else that.floorNumber="几号楼",""==that.schoolId?e.showModal({title:"提示",content:"请确保您已选择学校，并且学校是由搜索得来"}):e.showModal({title:"提示",content:"当前所选学校暂无楼号可选，请选择其他学校"})})},uImageTap:function(){var t=this;t.$refs.uImage.uploadimage(t.upImgBasic),e.$once("update",function(e){t.imgUrl=e.imgUrl[0]}),setTimeout(function(){""==t.doorNumber||""==t.floorNumber||""==t.schoolId||""==t.name?e.showModal({title:"提示",content:"您的信息未填写完整，不能保存",success:function(e){e.confirm||e.cancel}}):""!==t.imgUrl?e.getStorage({key:"userId",success:function(r){var o=r.data;t.userId=Number(r.data),t.Post("http://39.99.137.77:8081/projects/clientUserAddress/completeMaterialClientUser",{avatarUrl:t.imgUrl,campusId:Number(t.schoolId),campusName:t.schoolData,clientUserId:o,cuId:o,doorNumber:t.doorNumber,floorNumber:t.floorNumber,id:t.id,name:t.name,phone:""},function(t){e.switchTab({url:"/pages/tabBar/home/home"})})}}):e.getStorage({key:"userId",success:function(r){var o=r.data;t.userId=Number(r.data),t.Post("http://39.99.137.77:8081/projects/clientUserAddress/completeMaterialClientUser",{avatarUrl:"b/2019/12/0_20191206170150.png",campusId:Number(t.schoolId),campusName:t.schoolData,clientUserId:o,cuId:o,doorNumber:t.doorNumber,floorNumber:t.floorNumber,id:t.id,name:t.name,phone:""},function(t){e.switchTab({url:"/pages/tabBar/home/home"})})}})},1e3)},delImgInfo:function(){var e=s(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),upBasicData:function(){var t=s(n.default.mark(function t(r){var o,a,i;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:o=[],a=0,i=r.length;case 2:if(!(a<i)){t.next=14;break}if(t.prev=3,""==r[a].path_server){t.next=7;break}return t.next=7,o.push(r[a].path_server.split(","));case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](3);case 11:a++,t.next=2;break;case 14:this.basicArr=o,o.length==this.upImgBasic.count&&e.showToast({title:"上传成功",icon:"none"});case 16:case"end":return t.stop()}},t,this,[[3,9]])}));function r(e){return t.apply(this,arguments)}return r}(),getUpImgInfoBasic:function(){},Post:function(t,r,o){e.request({method:"POST",url:t,data:r,header:{"Content-Type":"application/json"},success:function(e){o(e.data)},fail:function(e){alert("信息错误")}})},Get:function(t,r,o){e.request({url:t,data:r,header:{"Content-Type":"application/json"},success:function(e){o(e.data)},fail:function(e){alert("信息错误")}})},showSinglePicker:function(){var t=this;e.hideKeyboard(),this.show6=!1,this.pickerSingleArray=[],this.schoolIdArr=[],this.Get("http://39.99.137.77:8081/projects/campus/keyWordsSeach",{campusName:this.schoolData},function(e){for(var r=e,o=0;o<r.length;o++)t.pickerSingleArray.push({label:r[o].campusName,value:r[o].status}),t.schoolIdArr.push(r[o].id)}),this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},onConfirm:function(t){e.hideKeyboard();var r=Number(t.index);this.schoolId=this.schoolIdArr[r],this.schoolData=t.label,this.newSchoolData=t.label,this.serachFlag=0,this.show1=!1},onBuilding:function(t){e.hideKeyboard(),this.show1=!1;var r=Number(t.index);this.buildingId=this.buildingIdArr[r],this.floorNumber=t.label,this.show5=!0},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpbuilding.showPicker?(this.$refs.mpbuilding.pickerCancel(),!0):void 0}}};t.default=c}).call(this,r("6e42")["default"],r("0de9")["default"])}},[["757e","common/runtime","common/vendor"]]]);