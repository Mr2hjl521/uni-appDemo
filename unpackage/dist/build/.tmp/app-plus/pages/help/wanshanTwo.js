(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/help/wanshanTwo"],{"382a":function(e,t,r){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"b",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return n})},"40db":function(e,t,r){"use strict";(function(e){r("5925"),r("921b");n(r("66fd"));var t=n(r("4fc1"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},"4f3b":function(e,t,r){"use strict";r.r(t);var n=r("d756"),o=r.n(n);for(var a in n)"default"!==a&&function(e){r.d(t,e,function(){return n[e]})}(a);t["default"]=o.a},"4fc1":function(e,t,r){"use strict";r.r(t);var n=r("382a"),o=r("4f3b");for(var a in o)"default"!==a&&function(e){r.d(t,e,function(){return o[e]})}(a);r("aa66");var i,s=r("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=u.exports},"9b4b":function(e,t,r){},aa66:function(e,t,r){"use strict";var n=r("9b4b"),o=r.n(n);o.a},d756:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("a34a"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)})}}var s=function(){return r.e("components/mpvue-picker/mpvuePicker").then(r.bind(null,"64fe"))},u={components:{mpvuePicker:s},data:function(){return{show1:!1,show5:!1,newSchoolData:"",serachFlag:1,floorNumber:"几号楼",pppic:"",picShow:!1,id:"",type:"",imgUrl:"",schoolIdArr:[],schoolId:"",buildingIdArr:[],buildingId:"",userId:"",name:"",pickerSingleArray:[],pickerBuilding:[],themeColor:"#007AFF",pickerText:"",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],schoolData:"",doorNumber:"",basicArr:[],upImgBasic:{basicConfig:{url:""},notli:!1,count:2,sourceType:"all",sizeType:!0,upBgColor:"#E8A400",upIconColor:"#fff",delBtnLocation:""}}},onLoad:function(){var t=this;e.getStorage({key:"userId",success:function(e){var r=e.data;t.userId=Number(e.data),t.upImgBasic.basicConfig.url="http://39.99.137.77:8081/projects/image/userAvatarImage/upload?userId="+e.data,t.Get("http://39.99.137.77:8081/projects/clientUserAddress/selectBooleanAddress",{clientUserId:r},function(e){!0===e.flag?(t.type=1,t.floorNumber=e.data.floorNumber,t.doorNumber=e.data.doorNumber,t.id=e.data.id):t.type=0})}})},methods:{openSearch:function(){this.serachFlag=1,this.show1=!0},showBuilding:function(){var t=this;if(e.hideKeyboard(),this.show6=!1,""==this.newSchoolData)return this.schoolId="",void e.showModal({title:"提示",content:"请确保您已选择学校"});this.pickerBuilding=[],this.buildingIdArr=[],this.Get("http://39.99.137.77:8081/projects/floor/findFloorByCampusId",{campusId:this.schoolId},function(r){var n=r;if(n.length>0){for(var o=0;o<n.length;o++)t.pickerBuilding.push({label:n[o].floorNumber,value:n[o].campusId}),t.buildingIdArr.push(n[o].campusId);t.pickerValueArray=t.pickerBuilding,t.mode="selector",t.deepLength=1,t.pickerValueDefault=[0],t.$refs.mpbuilding.show()}else t.floorNumber="几号楼",""==t.schoolId?e.showModal({title:"提示",content:"请确保您已选择学校，并且学校是由搜索得来"}):e.showModal({title:"提示",content:"当前所选学校暂无楼号可选，请选择其他学校"})})},uImageTap:function(){var t=this;t.$refs.uImage.uploadimage(t.upImgBasic),e.$once("update",function(e){t.imgUrl=e.imgUrl[0]}),setTimeout(function(){""==t.doorNumber||""==t.floorNumber||""==t.schoolId||""==t.name?e.showModal({title:"提示",content:"您的信息未填写完整，不能保存",success:function(e){e.confirm||e.cancel}}):""!==t.imgUrl?e.getStorage({key:"userId",success:function(r){var n=r.data;t.userId=Number(r.data),t.Post("http://39.99.137.77:8081/projects/clientUserAddress/completeMaterialClientUser",{avatarUrl:t.imgUrl,campusId:Number(t.schoolId),campusName:t.schoolData,clientUserId:n,cuId:n,doorNumber:t.doorNumber,floorNumber:t.floorNumber,id:t.id,name:t.name,phone:""},function(t){e.navigateBack({delta:1})})}}):e.getStorage({key:"userId",success:function(r){var n=r.data;t.userId=Number(r.data),t.Post("http://39.99.137.77:8081/projects/clientUserAddress/completeMaterialClientUser",{avatarUrl:"b/2019/12/0_20191206170150.png",campusId:Number(t.schoolId),campusName:t.schoolData,clientUserId:n,cuId:n,doorNumber:t.doorNumber,floorNumber:t.floorNumber,id:t.id,name:t.name,phone:""},function(t){e.navigateBack({delta:1})})}})},1e3)},delImgInfo:function(){var e=i(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),upBasicData:function(){var t=i(n.default.mark(function t(r){var o,a,i;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:o=[],a=0,i=r.length;case 2:if(!(a<i)){t.next=14;break}if(t.prev=3,""==r[a].path_server){t.next=7;break}return t.next=7,o.push(r[a].path_server.split(","));case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](3);case 11:a++,t.next=2;break;case 14:this.basicArr=o,o.length==this.upImgBasic.count&&e.showToast({title:"上传成功",icon:"none"});case 16:case"end":return t.stop()}},t,this,[[3,9]])}));function r(e){return t.apply(this,arguments)}return r}(),getUpImgInfoBasic:function(){},Post:function(t,r,n){e.request({method:"POST",url:t,data:r,header:{"Content-Type":"application/json"},success:function(e){n(e.data)},fail:function(e){alert("信息错误")}})},Get:function(t,r,n){e.request({url:t,data:r,header:{"Content-Type":"application/json"},success:function(e){n(e.data)},fail:function(e){alert("信息错误")}})},showSinglePicker:function(){var t=this;e.hideKeyboard(),this.show6=!1,this.pickerSingleArray=[],this.schoolIdArr=[],this.Get("http://39.99.137.77:8081/projects/campus/keyWordsSeach",{campusName:this.schoolData},function(e){for(var r=e,n=0;n<r.length;n++)t.pickerSingleArray.push({label:r[n].campusName,value:r[n].status}),t.schoolIdArr.push(r[n].id)}),this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},onConfirm:function(t){e.hideKeyboard();var r=Number(t.index);this.schoolId=this.schoolIdArr[r],this.schoolData=t.label,this.newSchoolData=t.label,this.serachFlag=0,this.show1=!1},onBuilding:function(t){e.hideKeyboard(),this.show1=!1;var r=Number(t.index);this.buildingId=this.buildingIdArr[r],this.floorNumber=t.label,this.show5=!0},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpbuilding.showPicker?(this.$refs.mpbuilding.pickerCancel(),!0):void 0}}};t.default=u}).call(this,r("6e42")["default"])}},[["40db","common/runtime","common/vendor"]]]);