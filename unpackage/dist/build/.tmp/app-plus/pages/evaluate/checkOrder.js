(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/evaluate/checkOrder"],{"17d2":function(e,t,o){},"74d6":function(e,t,o){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{serviceFree:"10",tpoOrderNumber:"",myPrice:"",money:"",clientUserCouponsIds:[],assets:"",testPhoneOrderId:"",coupclientUserCouponsListon:"",cuIsRecharge:"",testPhoneOrderBo:{pName:"",cuaName:"",pImageUrl:"",pcColorName:"",ppcPrice:"",cuaPhone:"",cuaDoorNumber:"",cuaFloorNumber:""},serviceTimePeriodBo:{campusName:"",suName:"",suPersonalDesc:"",suAvatarUrl:"",sutOpenTime:"",sutCloseTime:"",sutTimes:""},coupon:!1,payWindows:!1,items:[],payitems:[{value:"0",methods:"微信支付"},{value:"1",methods:"余额支付"}],current:"",type:9}},onLoad:function(e){var t=e.testPhoneOrderId;this.testPhoneOrderId=t;e.times},onReady:function(){},onPageScroll:function(e){},onShow:function(){var t=this,o=e.getStorageSync("serviceUserId");o&&(t.serviceUserId=Number(o),t.Get("http://39.99.137.77:8081/projects/serviceUserTime/findToBePayByTestPhoneOrderId?id="+t.testPhoneOrderId,{},function(e){if(t.tpoOrderNumber=e.testPhoneOrderBo.tpoOrderNumber,t.money=e.testPhoneOrderBo.ppcPrice,t.myPrice=t.money,t.testPhoneOrderBo=e.testPhoneOrderBo,t.assets=e.testPhoneOrderBo.assets,t.serviceTimePeriodBo=e.serviceTimePeriodBo,e.clientUserCouponsList.length<=0)t.coupclientUserCouponsListon=0;else for(var o=e.clientUserCouponsList,n=0;n<o.length;n++)1==o[n].coId&&(t.items.push({value:o[n].cucId.toString(),name:o[n].coFullReduction}),t.coupclientUserCouponsListon=1);t.cuIsRecharge=e.testPhoneOrderBo.cuIsRecharge,t.paycallback()}))},onReachBottom:function(){},mounted:function(){},onBackPress:function(t){e.showModal({title:"提示",content:"当前订单还未支付,是否确定退出？",success:function(t){t.confirm?(console.log(o("用户点击确定"," at pages\\evaluate\\checkOrder.vue:265")),e.reLaunch({url:"/pages/tabBar/home/home"})):t.cancel&&console.log(o("用户点击取消"," at pages\\evaluate\\checkOrder.vue:270"))}})},methods:{chosecoupon:function(){this.coupon=!0},closeWindows:function(){this.coupon=!1},checkboxChange:function(e){for(var t=this.items,o=e.detail.value,n=0,s=t.length;n<s;++n){var r=t[n];o.includes(r.value)?this.$set(r,"checked",!0):this.$set(r,"checked",!1)}this.clientUserCouponsIds=o;Number(this.clientUserCouponsIds.length);0!=this.clientUserCouponsIds.length&&(this.myPrice=0)},closePayMethod:function(){var t=this;0==this.myPrice&&(console.log(o("走优惠券接口"," at pages\\evaluate\\checkOrder.vue:321")),this.Post("http://39.99.137.77:8081/projects/couponsPay/filmPay",{clientUserCouponsIds:this.clientUserCouponsIds,orderNumber:this.tpoOrderNumber,price:0},function(o){if(200==o.code){var n=t.testPhoneOrderId;setTimeout(function(){e.hideLoading(),e.navigateTo({url:"../pay/success/success?num=2&orderId="+n})},1e3)}else e.showToast({title:"支付异常",duration:1e3}),setTimeout(function(){e.hideLoading()},2e3)})),this.myPrice>0&&(this.payWindows=!0),this.myPrice<0&&e.showModal({title:"提示",content:"当前金额小于0元,无法支付。",success:function(e){}})},closePayWindows:function(){this.payWindows=!1},paycallback:function(){this.myPrice;var t=this.tpoOrderNumber,o=this.testPhoneOrderId,n=this.clientUserCouponsIds;n.length;e.request({method:"POST",url:"http://39.99.137.77:8081/projects/appPay/notifyUrl",data:{outTradeNo:t,type:0,clientUserCouponsId:n},header:{"Content-Type":"application/json"},success:function(t){200==t.data.code&&e.navigateTo({url:"../pay/success/success?num=2&orderId="+o})},fail:function(e){}})},pay:function(){var t=this;if(0==this.type){var o=this.myPrice,n=this.tpoOrderNumber,s=this.testPhoneOrderId,r=this.clientUserCouponsIds;r.length;this.Get("http://39.99.137.77:8081/projects/appPay/pay?price="+o+"&outTradeNo="+n,{},function(t){var o=t.data;e.requestPayment({provider:"wxpay",orderInfo:{appid:o.appid,noncestr:o.noncestr,package:"Sign=WXPay",partnerid:o.partnerid,prepayid:o.prepayid,timestamp:o.timestamp,sign:o.sign},success:function(e){},fail:function(e){},complete:function(t){e.request({method:"POST",url:"http://39.99.137.77:8081/projects/appPay/notifyUrl",data:{outTradeNo:n,type:0,clientUserCouponsId:r},header:{"Content-Type":"application/json"},success:function(t){200==t.data.code?e.navigateTo({url:"../pay/success/success?num=2&orderId="+s}):(e.showModal({content:"支付异常",showCancel:!1}),e.navigateTo({url:"/pages/evaluate/checkOrder?testPhoneOrderId="+s}))},fail:function(e){}})}})})}1==this.type&&(this.myPrice>this.assets&&e.showModal({title:"提示",content:"余额不足，是否去充值？",success:function(t){t.confirm?e.navigateTo({url:"../recharge/recharge"}):t.cancel}}),this.myPrice<=this.assets&&this.Post("http://39.99.137.77:8081/projects/couponsPay/filmPay",{clientUserCouponsIds:this.clientUserCouponsIds,orderNumber:this.tpoOrderNumber,price:this.myPrice},function(o){if(200==o.code){t.payWindows=!1;var n=t.testPhoneOrderId;setTimeout(function(){e.hideLoading(),e.navigateTo({url:"../pay/success/success?num=2&orderId="+n})},1e3)}else e.showToast({title:"支付异常",duration:1e3}),setTimeout(function(){e.hideLoading()},2e3)})),9==this.type&&e.showModal({title:"提示",content:"亲爱的用户,您忘记选择支付方式了哦",success:function(e){e.confirm||e.cancel}})},radioChange:function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].value===e.target.value){this.current=t;break}this.type=e.target.value},toRecharge:function(){e.navigateTo({url:"../recharge/recharge"})},Post:function(t,o,n){e.request({method:"POST",url:t,data:o,header:{"Content-Type":"application/json"},success:function(e){n(e.data)},fail:function(e){alert(e.data)}})},Get:function(t,o,n){e.request({url:t,data:o,header:{"Content-Type":"application/json"},success:function(e){n(e.data)},fail:function(e){n(e)}})}}};t.default=n}).call(this,o("6e42")["default"],o("0de9")["default"])},"7f38":function(e,t,o){"use strict";(function(e){o("5925"),o("921b");n(o("66fd"));var t=n(o("8058"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},8058:function(e,t,o){"use strict";o.r(t);var n=o("e77f"),s=o("e1d0");for(var r in s)"default"!==r&&function(e){o.d(t,e,function(){return s[e]})}(r);o("b424");var i,c=o("f0c5"),a=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=a.exports},b424:function(e,t,o){"use strict";var n=o("17d2"),s=o.n(n);s.a},e1d0:function(e,t,o){"use strict";o.r(t);var n=o("74d6"),s=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r);t["default"]=s.a},e77f:function(e,t,o){"use strict";var n,s=function(){var e=this,t=e.$createElement;e._self._c},r=[];o.d(t,"b",function(){return s}),o.d(t,"c",function(){return r}),o.d(t,"a",function(){return n})}},[["7f38","common/runtime","common/vendor"]]]);