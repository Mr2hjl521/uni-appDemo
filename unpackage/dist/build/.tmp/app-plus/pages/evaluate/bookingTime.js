(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/evaluate/bookingTime"],{"0236":function(e,s,t){"use strict";t.r(s);var r=t("504c"),i=t.n(r);for(var o in r)"default"!==o&&function(e){t.d(s,e,function(){return r[e]})}(o);s["default"]=i.a},"0d96":function(e,s,t){"use strict";(function(e){t("5925"),t("921b");r(t("66fd"));var s=r(t("3ea6"));function r(e){return e&&e.__esModule?e:{default:e}}e(s.default)}).call(this,t("6e42")["createPage"])},2650:function(e,s,t){"use strict";var r=t("5ad9"),i=t.n(r);i.a},"3ea6":function(e,s,t){"use strict";t.r(s);var r=t("a485"),i=t("0236");for(var o in i)"default"!==o&&function(e){t.d(s,e,function(){return i[e]})}(o);t("2650");var n,a=t("f0c5"),c=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],n);s["default"]=c.exports},"504c":function(e,s,t){"use strict";(function(e,r){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=function(){return t.e("components/mpvue-picker/mpvuePicker").then(t.bind(null,"64fe"))},o=function(){return t.e("components/Calendar/Calendar").then(t.bind(null,"fb74"))},n={components:{mpvuePicker:i,Calendar:o},data:function(){return{show1:!1,show5:!1,newSchoolData:"",serachFlag:1,floorNumber:"几号楼",isToday:!1,schoolIdArr:[],schoolId:"",box:!1,openTime:"",closeTime:"",serviceUserId:"",time:"",openCalendar:!1,timeArr:[],disabledList:["2019-6-25","2019-6-26"],priceList:[],addressId:"",items:[],current:"",arddressWindows:!1,show:!1,kongWindows:!1,result:{},userInfo:{name:"",campusName:"",floorNumber:"",doorNumber:""},importUserInfo:{name:"",campusName:"",floorNumber:"",doorNumber:""},campusName:"",themeColor:"#FFD845",pickerSingleArray:[],pickerText:"",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],schoolData:"",serviceStaff:[]}},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onLoad:function(){var s=this,t=e.getStorageSync("serviceUserId");t&&(s.serviceUserId=Number(t),s.Get("http://39.99.137.77:8081/projects/serviceUserTime/selectServiceUserByUserId?serviceUserId="+s.serviceUserId,{},function(e){s.serviceStaff=e.serviceUserInfoBo;var t=e.boList,r=(new Date).getHours();if(r>16){for(var i=new Date,o=i.getFullYear(),n=i.getMonth(),a=i.getDate(),c=o+"-",u=n+1+"-",d=a,l=c+u+d,h=0;h<t.length;h++)s.timeArr.push(t[h]);var f=s.timeArr;if(f.includes(l)){var m=f.indexOf(l);if(-1!=m){f.splice(m,1);for(t=s.timeArr,h=0;h<t.length;h++)s.priceList.push({date:t[h],price:"可选"})}}else{for(h=0;h<t.length;h++)s.priceList.push({date:t[h],price:"可选"});for(h=0;h<t.length;h++)s.timeArr.push(t[h])}}else{for(h=0;h<t.length;h++)s.priceList.push({date:t[h],price:"可选"});for(h=0;h<t.length;h++)s.timeArr.push(t[h])}}));var r=e.getStorageSync("userId");r&&(s.userId=Number(r),s.Get("http://39.99.137.77:8081/projects/serviceUserTime/selectAddressById?clientUserId="+s.userId,{},function(e){var t=e.clientUserAddressList;if(t.length>1)for(var r=0;r<t.length;r++)s.items.push({value:t[r].id.toString(),name:t[r].name,campusName:t[r].campusName,doorNumber:t[r].doorNumber,floorNumber:t[r].floorNumber,index:r,isDefault:t[r].isDefault});else s.importUserInfo=e.clientUserAddressList,s.addressId=s.importUserInfo[0].id}),s.Get("http://39.99.137.77:8081/projects/campus/findAll?clientUserId="+s.userId,{},function(e){for(var t=e.list,r=0;r<t.length;r++)s.pickerSingleArray.push({label:t[r].campusName,value:t[r].status}),s.schoolIdArr.push(t[r].id);s.name=e.clientUserName}))},methods:{openSearch:function(){this.serachFlag=1,this.newSchoolData=this.userInfo.campusName,this.show1=!0},onBuilding:function(s){e.hideKeyboard(),this.show1=!1;var t=Number(s.index);this.buildingId=this.buildingIdArr[t],this.userInfo.floorNumber=s.label,e.hideKeyboard(),console.log(r("确认"," at pages\\evaluate\\bookingTime.vue:356")),this.show5=!0},showBuilding:function(){var s=this;if(e.hideKeyboard(),this.show6=!1,""==this.newSchoolData)return this.schoolId="",void e.showModal({title:"提示",content:"请确保您已选择学校"});e.hideKeyboard(),this.pickerBuilding=[],this.buildingIdArr=[],this.Get("http://39.99.137.77:8081/projects/floor/findFloorByCampusId",{campusId:this.schoolId},function(t){console.log(r(t," at pages\\evaluate\\bookingTime.vue:375"));var i=t;if(i.length>0){for(var o=0;o<i.length;o++)s.pickerBuilding.push({label:i[o].floorNumber,value:i[o].campusId}),s.buildingIdArr.push(i[o].campusId);s.pickerValueArray=s.pickerBuilding,s.mode="selector",s.deepLength=1,s.pickerValueDefault=[0],s.$refs.mpbuilding.show()}else s.floorNumber="几号楼",console.log(r(s.floorNumber," at pages\\evaluate\\bookingTime.vue:393")),""==s.schoolId?e.showModal({title:"提示",content:"请确保您已选择学校，并且学校是由搜索得来"}):e.showModal({title:"提示",content:"当前所选学校暂无楼号可选，请选择其他学校"})})},getDate:function(e){this.time=e.dateStr},showSinglePicker:function(){var s=this;e.hideKeyboard(),this.show6=!1,this.pickerSingleArray=[],this.schoolIdArr=[],this.Get("http://39.99.137.77:8081/projects/campus/keyWordsSeach",{campusName:this.userInfo.campusName},function(e){console.log(r(e," at pages\\evaluate\\bookingTime.vue:421"));for(var t=e,i=0;i<t.length;i++)s.pickerSingleArray.push({label:t[i].campusName,value:t[i].status}),s.schoolIdArr.push(t[i].id)}),this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},onConfirm:function(s){e.hideKeyboard();var t=Number(s.index);this.schoolId=this.schoolIdArr[t],this.userInfo.campusName=s.label,this.newSchoolData=s.label,this.serachFlag=0,this.show1=!1},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpbuilding.showPicker?(this.$refs.mpbuilding.pickerCancel(),!0):void 0},up:function(){e.chooseImage({count:6,sizeType:["original","compressed"],sourceType:["album"],success:function(e){this.src=JSON.stringify(e.tempFilePaths)}})},openrili:function(){this.openCalendar=!0},close:function(){this.openCalendar=!1},closerili:function(){this.time=this.timeArr[0];var s=this.time,t=this.timeArr;if(t.includes(s)){this.openCalendar=!1;var r=this;e.getStorage({key:"serviceUserId",success:function(e){r.Get("http://39.99.137.77:8081/projects/serviceUserTime/selectTimeById?serviceUserId="+e.data+"&times="+r.time,{},function(e){r.closeTime=e.closeTime,r.openTime=e.openTime,r.box=!0})}})}else e.showModal({title:"提示",content:'请您重新选择标记为"可选"的日期',success:function(e){e.confirm||e.cancel}})},goBack:function(){e.navigateTo({url:"../evaluate/bookingServiceStaff"})},onShowDatePicker:function(e){this.type=e,this.showPicker=!0,this.value=this[e]},onSelected:function(e){this.showPicker=!1,e&&(this[this.type]=e.value)},importMyAddress:function(){if(e.hideKeyboard(),this.kongWindows=!0,1==this.importUserInfo.length){var s=this.importUserInfo[0].name;this.userInfo.name=s;var t=this.importUserInfo[0].campusName;this.userInfo.campusName=t;var r=this.importUserInfo[0].floorNumber;this.userInfo.floorNumber=r,this.floorNumber=r;var i=this.importUserInfo[0].doorNumber;this.userInfo.doorNumber=i}else this.arddressWindows=!0},toWrite:function(){this.userInfo.name="",this.userInfo.campusName="",this.userInfo.floorNumber="",this.userInfo.doorNumber="",this.kongWindows=!1,this.addressId=""},toBook:function(){e.hideKeyboard();var s=this;if(1==s.kongWindows)if(""==s.time)e.showModal({title:"提示",content:"请您确保选择了时间以及信息都填写齐全",success:function(e){e.confirm||e.cancel}});else{var t=s.time,r=Number(s.addressId);e.getStorage({key:"serviceUserId",success:function(i){var o=i.data;e.getStorage({key:"ppcId",success:function(i){var n=i.data;e.getStorage({key:"userId",success:function(i){var a=Number(i.data);s.Post("http://39.99.137.77:8081/projects/testPhoneOrder/addOrder",{serviceUserId:o,ppcId:n,clientUserId:a,times:t,cuserAddId:r},function(s){e.navigateTo({url:"/pages/evaluate/checkOrder?testPhoneOrderId="+s+"&times="+t}),e.hideKeyboard()})}})}})}})}else 0==s.kongWindows&&(""==s.time||""==s.userInfo.name||""==s.userInfo.floorNumber||""==s.userInfo.doorNumber||""==s.userInfo.campusName?e.showModal({title:"提示",content:"请您确保选择了时间以及信息都填写齐全",success:function(e){e.confirm||e.cancel}}):s.show=!0)},closeWindows:function(){e.hideKeyboard();var s=this;s.show=!1;var t=s.time,r=s.userInfo.floorNumber,i=s.userInfo.doorNumber,o=s.schoolId,n=s.userInfo.name;e.getStorage({key:"serviceUserId",success:function(a){var c=a.data;e.getStorage({key:"ppcId",success:function(a){var u=a.data;e.getStorage({key:"userId",success:function(a){var d=Number(a.data);s.Post("http://39.99.137.77:8081/projects/serviceUserTime/insertServiceOrderNewAddress",{serviceUserId:c,ppcId:u,clientUserId:d,times:t,cuaName:n,cuaFloorNumber:r,cuaDoorNumber:i,cuaCampusId:o},function(s){e.hideKeyboard(),e.navigateTo({url:"/pages/evaluate/checkOrder?testPhoneOrderId="+s.data+"&times="+t})})}})}})}})},closeAddressWindows:function(){this.arddressWindows=!1},saveAndCloseAddressWindows:function(){e.hideKeyboard();var s=this.current;this.userInfo.name=this.items[s].name,this.userInfo.campusName=this.items[s].campusName,this.userInfo.floorNumber=this.items[s].floorNumber,this.userInfo.doorNumber=this.items[s].doorNumber,this.arddressWindows=!1,this.kongWindows=!0},radioChange:function(s){e.hideKeyboard();for(var t=0;t<this.items.length;t++)if(this.items[t].value===s.target.value){this.current=t;break}this.addressId=s.target.value},Post:function(s,t,r){e.request({method:"POST",url:s,data:t,header:{"Content-Type":"application/json"},success:function(e){r(e.data)},fail:function(e){alert(e.data)}})},Get:function(s,t,r){e.request({url:s,data:t,header:{"Content-Type":"application/json"},success:function(e){r(e.data)},fail:function(e){r(e)}})}}};s.default=n}).call(this,t("6e42")["default"],t("0de9")["default"])},"5ad9":function(e,s,t){},a485:function(e,s,t){"use strict";var r,i=function(){var e=this,s=e.$createElement;e._self._c},o=[];t.d(s,"b",function(){return i}),t.d(s,"c",function(){return o}),t.d(s,"a",function(){return r})}},[["0d96","common/runtime","common/vendor"]]]);