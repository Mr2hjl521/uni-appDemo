(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/setting/modifiedData"],{"3c43":function(e,t,r){"use strict";var a,o=function(){var e=this,t=e.$createElement;e._self._c},n=[];r.d(t,"b",function(){return o}),r.d(t,"c",function(){return n}),r.d(t,"a",function(){return a})},"56fe":function(e,t,r){"use strict";r.r(t);var a=r("3c43"),o=r("e583");for(var n in o)"default"!==n&&function(e){r.d(t,e,function(){return o[e]})}(n);r("85c4");var i,s=r("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);t["default"]=c.exports},"6c31":function(e,t,r){"use strict";(function(e){r("5925"),r("921b");a(r("66fd"));var t=a(r("56fe"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},"85c4":function(e,t,r){"use strict";var a=r("a8bf"),o=r.n(a);o.a},"877e":function(e,t,r){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("a34a"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,a,o,n,i){try{var s=e[n](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(a,o)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var n=e.apply(t,r);function s(e){i(n,a,o,s,c,"next",e)}function c(e){i(n,a,o,s,c,"throw",e)}s(void 0)})}}var c=function(){return r.e("components/mpvue-picker/mpvuePicker").then(r.bind(null,"64fe"))},u={components:{mpvuePicker:c},data:function(){return{show1:!1,show5:!1,newSchoolData:"",serachFlag:1,floorNumber:"几号楼",myFlag:0,pppic:"",picShow:!1,id:"",type:"",imgUrl:"",schoolIdArr:[],schoolId:"",buildingIdArr:[],buildingId:"",userId:"",name:"",pickerSingleArray:[],pickerBuilding:[],themeColor:"#007AFF",pickerText:"",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],schoolData:"",doorNumber:"",basicArr:[],upImgBasic:{basicConfig:{url:""},notli:!1,iconReplace:"",count:5,sourceType:"all",sizeType:!0,upBgColor:"#E8A400",upIconColor:"#fff",delBtnLocation:""}}},onLoad:function(){var t=this;e.getStorage({key:"userId",success:function(e){var r=e.data;t.userId=Number(e.data),t.upImgBasic.basicConfig.url="http://39.99.137.77:8081/projects/image/userAvatarImage/upload?userId="+e.data,t.Get("http://39.99.137.77:8081/projects/clientUserAddress/selectBooleanAddress",{clientUserId:r},function(e){console.log(a(e," at pages\\user\\setting\\modifiedData.vue:156")),!0===e.flag?(t.type=1,t.name=e.data.name,t.schoolData=e.data.campusName,t.floorNumber=e.data.floorNumber,t.schoolId=e.data.campusId,t.doorNumber=e.data.doorNumber,t.id=e.data.id,t.pppic=e.data.avatarUrl,t.picShow=!0,console.log(a(e.data.avatarUrl," at pages\\user\\setting\\modifiedData.vue:170"))):(t.type=0,t.picShow=!1)})}})},onBackPress:function(t){e.reLaunch({url:"/pages/tabBar/user/user"})},methods:{openSearch:function(){this.serachFlag=1,this.show1=!0},showBuilding:function(){var t=this;if(e.hideKeyboard(),this.show6=!1,""==this.newSchoolData)return this.schoolId="",void e.showModal({title:"提示",content:"请确保您已选择学校"});this.Get("http://39.99.137.77:8081/projects/floor/findFloorByCampusId",{campusId:this.schoolId},function(r){console.log(a(r," at pages\\user\\setting\\modifiedData.vue:209"));var o=r;if(r.length>0){for(var n=0;n<o.length;n++)t.pickerBuilding.push({label:o[n].floorNumber,value:o[n].campusId}),t.buildingIdArr.push(o[n].campusId);t.pickerValueArray=t.pickerBuilding,t.mode="selector",t.deepLength=1,t.pickerValueDefault=[0],t.$refs.mpbuilding.show()}else t.floorNumber="几号楼",console.log(a(t.floorNumber," at pages\\user\\setting\\modifiedData.vue:227")),""==t.schoolId?e.showModal({title:"提示",content:"请确保您已选择学校，并且学校是由搜索得来"}):e.showModal({title:"提示",content:"当前所选学校暂无楼号可选，请选择其他学校"})})},deletePic:function(){this.picShow=!1,this.myFlag=1},uImageTap:function(){var t=this;1==this.myFlag&&(t.$refs.uImage.uploadimage(t.upImgBasic),e.$once("update",function(e){t.imgUrl=e.imgUrl[0]}),setTimeout(function(){e.getStorage({key:"userId",success:function(r){var a=r.data;t.userId=Number(r.data),""==t.imgUrl||""==t.name||""==t.doorNumber||""==t.floorNumber||""==t.schoolId?e.showModal({title:"提示",content:"您的信息未填写完整，不能保存",success:function(e){e.confirm||e.cancel}}):t.Post("http://39.99.137.77:8081/projects/clientUserAddress/completeMaterialClientUser",{avatarUrl:t.imgUrl,campusId:Number(t.schoolId),campusName:t.schoolData,clientUserId:a,cuId:a,doorNumber:t.doorNumber,floorNumber:t.floorNumber,id:t.id,name:t.name,phone:""},function(t){e.switchTab({url:"/pages/tabBar/user/user"})})}})},1500)),0==this.myFlag&&e.getStorage({key:"userId",success:function(r){var o=r.data;if(t.userId=Number(r.data),""==t.name||""==t.doorNumber||""==t.floorNumber||""==t.schoolId)e.showModal({title:"提示",content:"您的信息未填写完整，不能保存",success:function(e){e.confirm||e.cancel}});else{var n=t.pppic.replace("http://39.99.137.77:8080/projects/resource/image/b/","");console.log(a(n," at pages\\user\\setting\\modifiedData.vue:338")),t.Post("http://39.99.137.77:8081/projects/clientUserAddress/completeMaterialClientUser",{avatarUrl:n,campusId:Number(t.schoolId),campusName:t.schoolData,clientUserId:o,cuId:o,doorNumber:t.doorNumber,floorNumber:t.floorNumber,id:t.id,name:t.name,phone:""},function(t){e.switchTab({url:"/pages/tabBar/user/user"})})}}})},delImgInfo:function(){var e=s(o.default.mark(function e(t){return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),upBasicData:function(){var t=s(o.default.mark(function t(r){var a,n,i;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=[],n=0,i=r.length;case 2:if(!(n<i)){t.next=14;break}if(t.prev=3,""==r[n].path_server){t.next=7;break}return t.next=7,a.push(r[n].path_server.split(","));case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](3);case 11:n++,t.next=2;break;case 14:this.basicArr=a,a.length==this.upImgBasic.count&&e.showToast({title:"上传成功",icon:"none"});case 16:case"end":return t.stop()}},t,this,[[3,9]])}));function r(e){return t.apply(this,arguments)}return r}(),getUpImgInfoBasic:function(){},Post:function(t,r,a){e.request({method:"POST",url:t,data:r,header:{"Content-Type":"application/json"},success:function(e){a(e.data)},fail:function(e){alert("信息错误")}})},Get:function(t,r,a){e.request({url:t,data:r,header:{"Content-Type":"application/json"},success:function(e){a(e.data)},fail:function(e){alert("信息错误")}})},showSinglePicker:function(){var t=this;e.hideKeyboard(),this.show6=!1,this.pickerSingleArray=[],this.schoolIdArr=[],this.Get("http://39.99.137.77:8081/projects/campus/keyWordsSeach",{campusName:this.schoolData},function(e){for(var r=e,a=0;a<r.length;a++)t.pickerSingleArray.push({label:r[a].campusName,value:r[a].status}),t.schoolIdArr.push(r[a].id)}),this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},onConfirm:function(t){e.hideKeyboard();var r=Number(t.index);this.schoolId=this.schoolIdArr[r],this.schoolData=t.label,this.newSchoolData=t.label,this.serachFlag=0,this.show1=!1},onBuilding:function(t){e.hideKeyboard(),this.show1=!1;var r=Number(t.index);this.buildingId=this.buildingIdArr[r],this.floorNumber=t.label,this.show5=!0},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpbuilding.showPicker?(this.$refs.mpbuilding.pickerCancel(),!0):void 0}}};t.default=u}).call(this,r("6e42")["default"],r("0de9")["default"])},a8bf:function(e,t,r){},e583:function(e,t,r){"use strict";r.r(t);var a=r("877e"),o=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,function(){return a[e]})}(n);t["default"]=o.a}},[["6c31","common/runtime","common/vendor"]]]);